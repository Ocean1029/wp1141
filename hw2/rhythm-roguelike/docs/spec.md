# Rhythm Roguelike 遊戲設計規格書

## 遊戲概述

Rhythm Roguelike 是一個結合節拍遊戲和 Roguelike 元素的網頁遊戲。玩家需要按照節奏進行移動和攻擊，在隨機生成的地牢中生存並完成挑戰。

## 1. Rhythm System (節拍系統)

### 1.1 基本節拍設定
- **BPM**: 120 (v1.0 固定)
- **拍號**: 4/4 拍
- **節拍變化**: 隨著關卡進度調整 (v1.0 先固定 120 BPM)

### 1.2 音效系統
- **正拍音效**: 較大聲的基礎音效 (類似節拍器)
- **負拍音效**: 較小聲的基礎音效
- **音樂來源**: 網路固定音軌 (v1.0)

### 1.3 視覺節拍指示
- **節拍條**: 畫面中顯示節奏的視覺指示器
- **節拍同步**: 所有遊戲動作都必須與節拍同步

### 1.4 輸入判定
- **判定窗口**: 拍點前後極短時間內按下按鍵才算有效輸入
- **精確度要求**: 類似傳統節拍遊戲的判定機制

## 2. Player System (玩家系統)

### 2.1 移動系統
- **基礎移動**: 上下左右箭頭鍵 (不支援斜向移動)
- **移動限制**: 每拍只能移動一格
- **未來擴展**: Shift 衝刺等技能 (v1.0 不包含)

### 2.2 角色屬性
- **血量**: 10 滴 (戰士預設)
- **攻擊力**: 3 點傷害 (戰士預設)

### 2.3 攻擊系統
- **攻擊時機**: 反拍按下 F 鍵
- **攻擊方向**: 使用上下左右箭頭鍵指定攻擊方向
- **自動攻擊**: 如果上下左右只有一個敵人，會自動攻擊該敵人
- **職業系統**: 未來支援多職業，v1.0 僅戰士

## 3. Enemy Design (敵人設計)

### 3.1 敵人類型

#### 近戰 A
- **血量**: 9
- **攻擊力**: 2
- **行為模式**:
  - 不相鄰時：正拍向玩家靠近一格
  - 相鄰時：若下個正拍玩家仍在原格 → 攻擊
  - 若玩家閃走 → 本次攻擊冷卻，不行動

#### 近戰 B
- **血量**: 7
- **攻擊力**: 3
- **行為模式**:
  - 不相鄰時：正拍向玩家靠近一格
  - 相鄰時：若下個正拍玩家仍在原格 → 攻擊
  - 若玩家閃走 → 正常移動追擊玩家

#### 遠程 A
- **血量**: 5
- **攻擊力**: 3
- **行為模式**:
  - 正拍三輪循環：兩次移動，一次射箭
  - 移動：傾向遠離玩家的同 row 或同 column 方向
  - 射箭：面向角色發射
  - 箭矢：每半拍移動一格，撞牆消失，碰到玩家造成傷害

#### 史萊姆 A
- **血量**: 5
- **攻擊力**: 2
- **行為模式**:
  - 每兩個正拍隨機移動一格
  - 留下黏液：玩家碰到後下個正拍不能移動

### 3.2 移動邏輯
- **向玩家靠近**: 優先選擇距離玩家最近的格子移動
- **判定順序**: 先處理玩家動作，再處理敵人攻擊和移動

## 4. Map Design (地圖設計)

### 4.1 房間系統
- **格子制**: 玩家和敵人各佔一格
- **節拍同步**: 所有行為都依照節奏執行
- **房間形狀**: v1.0 支援 8×8、6×6、4×6 矩形

### 4.2 地牢結構
- **層級系統**: 多層地牢，每層多個房間
- **v1.0 設計**: 三層地牢
  - 第一層：intro 層，一個怪物房 + 一個獎勵房 (含向下樓梯)
  - 第二層：標準地牢層
  - 第三層：最終挑戰層

### 4.3 Roguelike 元素
- **隨機性**: 房間數量、形狀、怪物種類和數量都隨機生成
- **難度遞增**: 越深層難度越高

## 5. Reward Mechanism (獎勵機制)

### 5.1 房間獎勵
- **愛心**: 玩家碰到回復 3 滴血

### 5.2 層級獎勵
- **生命上限 +5**: 增加最大血量
- **傷害 +1**: 增加攻擊力
- **回滿血**: 完全回復血量
- **選擇機制**: 三選一

## 6. Art Design (美術設計)

### 6.1 視覺風格
- **2.5D 像素風**: 現代像素藝術風格
- **色彩搭配**: 符合地牢主題的配色方案

## 7. Progression & Meta (進度和元遊戲)

### 7.1 遊戲循環
- **無持久化**: 每次運行都是全新遊戲
- **無資料庫**: 不保存任何進度

### 7.2 遊戲結局
- **勝利條件**: 完成三層地牢
- **失敗條件**: 玩家血量歸零
- **結局畫面**: 勝利/失敗畫面 + Retry 按鈕

### 7.3 遊戲模式
- **單人遊戲**: 不支援多人模式

## 8. 技術實現要點

### 8.1 核心系統
- **節拍同步**: 所有遊戲邏輯必須與音頻節拍同步
- **狀態管理**: 玩家、敵人、地圖狀態的統一管理
- **碰撞檢測**: 精確的格子間碰撞判定

### 8.2 性能優化
- **音頻管理**: 高效的音效播放和同步
- **渲染優化**: 2.5D 像素風格的流暢渲染
- **記憶體管理**: 避免記憶體洩漏

## 9. 開發里程碑

### Phase 1 (v1.0 核心功能)
- [ ] 基本節拍系統 (120 BPM, 4/4 拍)
- [ ] 玩家移動和攻擊系統
- [ ] 四種敵人 AI 實現
- [ ] 基本地圖系統 (8×8, 6×6, 4×6)
- [ ] 三層地牢結構
- [ ] 獎勵機制
- [ ] 勝利/失敗畫面

### Phase 2 (未來擴展)
- [ ] 多職業系統
- [ ] 更多敵人類型
- [ ] Boss 戰
- [ ] 技能系統 (衝刺等)
- [ ] 更複雜的地圖生成
- [ ] 音效和背景音樂優化

## 10. 遊戲平衡性

### 10.1 難度曲線
- **第一層**: 教學和適應
- **第二層**: 中等挑戰
- **第三層**: 高難度挑戰

### 10.2 數值平衡
- **玩家血量**: 10 (可通過獎勵增加)
- **敵人血量**: 5-9 (隨層級增加)
- **傷害數值**: 2-3 (平衡戰鬥節奏)

---

*此規格書將隨著開發進度持續更新和完善*
